<script>
    function tarehe() {
        let trh_slip = document.querySelectorAll('.trh_slip')
        let d = new Date().toLocaleString('en-GB', { timeZone: 'Africa/Nairobi', weekday: 'long' })
        let s = new Date().toLocaleDateString('en-GB', { timeZone: 'Africa/Nairobi' })
        let innerText = 'üìÖ'

        switch (d) {
            case 'Monday':
                innerText = 'Jumatatu: ' + s
                break;

            case 'Tuesday':
                innerText = 'Jumanne: ' + s
                break;

            case 'Wednesday':
                innerText = 'Jumatano: ' + s
                break;

            case 'Thursday':
                innerText = 'Alhamis: ' + s
                break;

            case 'Friday':
                innerText = 'Ijumaa: ' + s
                break;

            case 'Saturday':
                innerText = 'Jumamosi: ' + s
                break;

            case 'Sunday':
                innerText = 'Jumapili: ' + s
                break;

            default:
                innerText = 'üò©'
                break;
        }
        for (let el of trh_slip) {
            el.textContent = innerText
        }
    }
    tarehe()
</script>

<!-- Fichua malipo and Form submitting payments info -->
<script>
    function fichuaMalipo() {
        let malipoCont = document.getElementById('malipo-cont')
        malipoCont.classList.toggle('d-none')
        document.getElementById('lipa-btn').style.display = 'none'
    }

    // Paying Instrictions
    // Function to hide all divs except the specified one
    function showOnly(divClass) {
        const allDivs = document.querySelectorAll('.mitandao_maelezo > div');
        allDivs.forEach(div => {
            if (div.classList.contains(divClass)) {
                div.style.display = 'block';
            } else {
                div.style.display = 'none';
            }
        });
    }

    // Function to set active class on h3 and remove from others
    function setActiveH3(activeH3) {
        const allH3s = document.querySelectorAll('.head h3');
        allH3s.forEach(h3 => {
            h3.classList.remove('active');
        });
        activeH3.classList.add('active');
    }

    // Get all h3 elements
    const h3Elements = document.querySelectorAll('.head h3');

    // Set the first h3 as active and show its corresponding div on page load
    if (h3Elements.length > 0) {
        const firstH3 = h3Elements[0];
        setActiveH3(firstH3);
        const firstProviderClass = firstH3.id.split('_')[0];
        showOnly(firstProviderClass);
    }

    // Add click event listeners to all h3 elements
    h3Elements.forEach(h3 => {
        h3.addEventListener('click', function () {
            const providerClass = this.id.split('_')[0];
            showOnly(providerClass);
            setActiveH3(this);
        });
    });

    //send payment details to server
    //send payment details to server
    // const form = document.getElementById("confirm-form");

    // form.addEventListener("submit", async function (event) {
    //     event.preventDefault(); // Prevent default form submission

    //     // Show Bootstrap Modal with spinner
    //     const loadingModal = new bootstrap.Modal(document.getElementById("loadingModal"));
    //     loadingModal.show();

    //     //modal data
    //     let modal_title = document.getElementById('loadingModalTitle')
    //     let modal_body = document.getElementById('loadingModalBody')
    //     let modal_footer = document.getElementById('modal_footer')

    //     // Prepare form data
    //     const formData = new FormData(form);

    //     try {
    //         const response = await fetch(form.action, {
    //             method: form.method,
    //             body: formData,
    //         });

    //         const result = await response.json();
    //         console.log(result)

    //         // Handle server response (customize as needed)
    //         if (response.status === 200) {
    //             modal_title.textContent = `${result.title}`
    //             modal_body.innerText = `${result.message}`
    //             let fbtn = `<button type="button" class="btn ${result.btn}" onclick="window.location.reload()">Close</button>`;
    //             return modal_footer.innerHTML = fbtn
    //         } else {
    //             throw new Error(`Server returned ${response.status} as code`)
    //         }
    //     } catch (error) {
    //         modal_title.textContent = '‚ùå Failed confirming payments'
    //         let socials = document.getElementById('socials').cloneNode(true)
    //         socials.classList.remove('d-none')
    //         modal_body.innerHTML = ''
    //         modal_body.appendChild(socials)
    //         let fbtn = `<button type="button" class="btn btn-danger" onclick="window.location.reload()">Close</button>`;
    //         modal_footer.innerHTML = fbtn
    //     }
    // });
</script>