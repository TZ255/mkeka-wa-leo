<script>
    document.addEventListener('DOMContentLoaded', function () {
        const blogPost = document.getElementById('blog-post');

        if (!blogPost) return;

        // Add reading progress indicator
        const progressBar = document.createElement('div');
        progressBar.id = 'reading-progress';
        progressBar.style.cssText = `
        position: fixed;
        top: 0;
        left: 0;
        width: 0%;
        height: 3px;
        background: linear-gradient(to right, #198754, #146c43);
        z-index: 1000;
        transition: width 0.1s ease;
    `;
        document.body.appendChild(progressBar);

        function updateProgress() {
            const scrollTop = window.pageYOffset;
            const docHeight = document.body.scrollHeight - window.innerHeight;
            const scrollPercent = (scrollTop / docHeight) * 100;
            progressBar.style.width = Math.min(scrollPercent, 100) + '%';
        }

        window.addEventListener('scroll', updateProgress);


        // Add smooth scrolling to TOC links (server-side generated)
        const tocLinks = blogPost.querySelectorAll('#table-of-contents a[href^="#"]');
        tocLinks.forEach(link => {
            link.addEventListener('click', function (e) {
                e.preventDefault();
                const targetId = this.getAttribute('href').substring(1);
                const targetElement = document.getElementById(targetId);
                if (targetElement) {
                    targetElement.scrollIntoView({ behavior: 'smooth' });
                }
            });
        });
    });
</script>

<script>
    const toggleBtn = document.getElementById('toc-toggle');
    const tocList = document.getElementById('toc-list');

    toggleBtn.addEventListener('click', () => {
        tocList.classList.toggle('open');
        toggleBtn.textContent = tocList.classList.contains('open') ? '[-]' : '[+]';
    });
</script>